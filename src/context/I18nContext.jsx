import React, { createContext, useContext, useEffect, useMemo, useState } from 'react'

const I18nContext = createContext()

const dict = {
  en: {
    nav: { meats: 'Meats', about: 'About', contact: 'Contact', cart: 'Cart' },
    home: {
      title: 'Amsellem — Kosher Butcherie',
      lead: 'Tradition, craftsmanship, and care — serving our community with the finest kosher meats and prepared foods.',
      ctaShop: 'Shop Meats',
      ctaHistory: 'Our History',
      story: 'Our Story',
      storyDesc: 'From humble beginnings to a cornerstone of the neighborhood — Amsellem has upheld kosher standards with dedication and pride.',
      history1: 'Founded on principles of faith and family, our butcherie has served generations with carefully prepared cuts and warm service. Every order carries our commitment to quality.',
      history2: 'Our team blends time-honored techniques with modern standards — ensuring each selection meets kosher requirements and your expectations.'
    },
    products: { title: 'Our Meats & Premade Foods', all: 'All' },
    categories: { Beef: 'Beef', Lamb: 'Lamb', Chicken: 'Chicken', Veal: 'Veal', Spices: 'Spices', Oil: 'Oil', Premade: 'Premade' },
    product: { addToBasket: 'Add to Basket', each: 'each', outOfStock: 'Out of Stock' },
    products_list: {
      b1_name: 'Ribeye Steak (per lb)',
      b1_desc: 'Well-marbled ribeye, Kosher-cut.',
      b2_name: 'Ground Beef (per lb)',
      b2_desc: 'Fresh ground beef, great for burgers.',
      b3_name: 'Beef Chuck Cubes (per lb)',
      b3_desc: 'Tender cubes, perfect for stew.',
      b4_name: 'Short Ribs (per lb)',
      b4_desc: 'Meaty short ribs for braising.',
      b5_name: 'Beef Bones (per lb)',
      b5_desc: 'Bones for broth and stock.',
      b6_name: 'Beef Flank Steak (per lb)',
      b6_desc: 'Lean flank steak, great for grilling.',
      b7_name: 'Beef Roulade (per lb)',
      b7_desc: 'Rolled beef roulade, pre-made.',
      b8_name: 'Beef Tail (per lb)',
      b8_desc: 'Beef tail for soups and stews.',
      l1_name: 'Lamb Chops (per lb)',
      l1_desc: 'Tender lamb chops, trimmed.',
      c1_name: 'Whole Chicken',
      c1_desc: 'Free-range whole chicken.',
      c2_name: 'Chicken Breast (per lb)',
      c2_desc: 'Boneless, skinless chicken breast.',
      c3_name: 'Chicken Thighs (per lb)',
      c3_desc: 'Juicy and flavorful chicken thighs.',
      c4_name: 'Chicken Cutlet (per lb)',
      c4_desc: 'Thin chicken cutlets, ready to cook.',
      c5_name: 'Chicken Drumsticks (per lb)',
      c5_desc: 'Fresh chicken drumsticks.',
      c6_name: 'Chicken Wings (per lb)',
      c6_desc: 'Chicken wings, great for frying or baking.',
      c7_name: 'Chicken Shnitzel',
      c7_desc: 'Breaded chicken shnitzel.',
      v1_name: 'Veal Steak (per lb)',
      v1_desc: 'Premium veal steak, tender and mild.',
      v2_name: 'Veal Cubes (per lb)',
      v2_desc: 'Perfect for veal stew and roasts.',
      sp1_name: 'Dafina Spices',
      sp1_desc: 'Traditional Dafina spice blend.',
      sp2_name: 'Red Paprika',
      sp2_desc: 'High-quality red paprika powder.',
      sp3_name: 'White Pepper',
      sp3_desc: 'Ground white pepper, premium quality.',
      sp4_name: 'Turmeric',
      sp4_desc: 'Pure turmeric powder.',
      sp5_name: 'Granulated Garlic',
      sp5_desc: 'Dehydrated garlic granules.',
      p1_name: 'Kofta (premade, 1 lb)',
      p1_desc: 'Seasoned ground beef (Kosher), ready to grill.',
      p2_name: 'Marinated Chicken Thighs',
      p2_desc: 'Ready-to-cook marinated chicken thighs.',
      p2c_name: 'Marinated Chicken Thighs',
      p2c_desc: 'Ready-to-cook marinated chicken thighs.',
      p3_name: 'Chicken Shawarma Skewers',
      p3_desc: 'Marinated chicken shawarma on skewers.',
      p4_name: 'Chinese Noodles',
      p4_desc: 'Prepared Chinese noodles.',
      p5_name: 'Spiced Rice',
      p5_desc: 'Seasoned rice blend.',
      p6_name: 'Extra Virgin Olive Oil',
      p6_desc: 'Premium extra virgin olive oil.',
      u1_name: 'Burger Patties',
      u1_desc: 'Ready-to-cook burger patties.',
      u2_name: 'Cow Leg',
      u2_desc: 'Fresh cow leg for braising.',
      u3_name: 'Lamb Leg',
      u3_desc: 'Whole lamb leg, premium cut.',
      u4_name: 'Minute Steak',
      u4_desc: 'Thin-cut beef steak, quick cook.',
      u5_name: 'Chuck Cubes',
      u5_desc: 'Tender chuck cubes for stewing.',
      u6_name: 'Sirloin',
      u6_desc: 'Premium sirloin steak.',
      u7_name: 'Lamb Ribs',
      u7_desc: 'Meaty lamb ribs for grilling.',
      u8_name: 'Cooking Oil',
      u8_desc: 'Premium quality cooking oil.',
      u9_name: 'Tritip',
      u9_desc: 'Flavorful tri-tip roast.',
      u10_name: 'Chicken Skewers',
      u10_desc: 'Marinated chicken on skewers.',
      u11_name: 'Bone-in Ribeye',
      u11_desc: 'Premium ribeye with bone.',
      u12_name: 'Chicken Thighs',
      u12_desc: 'Juicy chicken thighs.',
      u13_name: 'Beef Roulade',
      u13_desc: 'Rolled beef stuffed with herbs.',
      u14_name: 'Steak Spice',
      u14_desc: 'Seasoning blend for steaks.',
      u15_name: 'Beef Ribs',
      u15_desc: 'Meaty beef ribs.',
      u16_name: 'Minute Steak',
      u16_desc: 'Thin-cut quick cooking beef.',
      u17_name: 'Rack of Lamb',
      u17_desc: 'Elegant rack of lamb.',
      u18_name: 'Marinated Chicken',
      u18_desc: 'Pre-marinated chicken.',
      u18c_name: 'Marinated Chicken',
      u18c_desc: 'Pre-marinated chicken.',
      u19_name: 'Peppercorn Steak',
      u19_desc: 'Seasoned with peppercorns.',
      u20_name: 'Beef Steak',
      u20_desc: 'Classic beef steak.',
      u21_name: 'Chicken Wings',
      u21_desc: 'Crispy chicken wings.',
      u22_name: 'Beef Belly',
      u22_desc: 'Rich beef belly cut.',
      u23_name: 'Steak Cubes',
      u23_desc: 'Beef cubes for stir-fry.',
      u24_name: 'Lamb Chest',
      u24_desc: 'Lamb chest cut.',
      u25_name: 'Beef Burgers',
      u25_desc: 'Ready-to-cook burger patties.',
      u26_name: 'Chuck Roast',
      u26_desc: 'Beef chuck roast.',
      u27_name: 'Cumin',
      u27_desc: 'Ground cumin spice.',
      u28_name: 'Truffle Oil',
      u28_desc: 'Aromatic truffle-infused oil.',
      u29_name: 'Provencal Herbs',
      u29_desc: 'Mediterranean herb blend.',
      u30_name: 'Lamb Sirloin',
      u30_desc: 'Lamb sirloin steak.',
      u31_name: 'Veal Steaks',
      u31_desc: 'Premium veal steaks.',
      u32_name: 'Chicken Nuggets',
      u32_desc: 'Breaded chicken nuggets.',
      u33_name: 'Meatball Spices',
      u33_desc: 'Seasoning for meatballs.',
      u34_name: 'Beef Strips',
      u34_desc: 'Sliced beef strips.',
      u35_name: 'Specialty Beef',
      u35_desc: 'Specialty beef cut.',
    },
    cart: { title: 'Your Basket', empty: 'Your basket is empty.', browse: 'Browse Meats', remove: 'Remove', total: 'Total', proceed: 'Proceed to Checkout' },
    checkout: {
      title: 'Checkout',
      method: 'Delivery / Pickup',
      delivery: 'Delivery',
      pickup: 'Pickup',
      address: 'Delivery Address',
      firstName: 'First Name',
      lastName: 'Last Name',
      email: 'Email',
      phone: 'Phone',
      street: 'Street Address',
      city: 'City',
      postal: 'Postal Code',
      summary: 'Order Summary',
      subtotal: 'Subtotal',
      fee: 'Delivery',
      total: 'Total',
      payWith: 'Submit Order to Clover',
      submitOrder: 'Submit Order',
      processing: 'Submitting order...',
      cloverNote: 'Your order will be sent to the register. Payment will be processed at the counter.'
    },
    contact: { title: 'Contact Us', name: 'Name', email: 'Email', message: 'Message', send: 'Send Message', thanks: 'Thanks! We received your message (demo).' },
    about: {
      title: 'About Amsellem',
      p1: 'Welcome to Amsellem, your neighborhood Kosher butcher. We provide high-quality cuts, prepared according to kosher standards, with friendly service and a deep connection to tradition.',
      p2: 'Family-owned and operated — serving the community with care.'
    },
    footer: {
      title: 'Our Location',
      address: '2079 Rue Saint-Louis',
      city: 'Saint-Laurent, QC',
      postal: 'H4M 1P1',
      privacy: 'Privacy Policy'
    },
    privacy: {
      title: 'Privacy Policy',
      intro: 'We respect your privacy. This page summarizes how we handle data for this demo application.',
      data: 'Personal Data',
      data_text: 'We collect only the information you submit (e.g., contact details) to process orders or respond to inquiries. We do not sell data.',
      payments: 'Payments',
      payments_text: 'Orders are sent to Clover POS system for processing. Payment is handled at the point of sale.',
      contact: 'Contact',
      contact_text: 'Questions? Contact us via the form on the Contact page.'
    }
  },
  fr: {
    nav: { meats: 'Viandes', about: 'À propos', contact: 'Contact', cart: 'Panier' },
    home: {
      title: 'Amsellem — Boucherie Cacher',
      lead: 'Tradition, savoir-faire et attention — nous servons notre communauté avec les meilleures viandes casher et des plats préparés.',
      ctaShop: 'Voir les viandes',
      ctaHistory: 'Notre histoire',
      story: 'Notre histoire',
      storyDesc: 'Depuis des débuts modestes jusqu\'à devenir un pilier du quartier — Amsellem a maintenu les standards casher avec dévouement et fierté.',
      history1: 'Fondée sur des principes de foi et de famille, notre boucherie sert des générations avec des pièces soigneusement préparées et un service chaloureux. Chaque commande porte notre engagement de qualité.',
      history2: 'Notre équipe allie des techniques éprouvées à des standards modernes — chaque sélection respecte les exigences casher et vos attentes.'
    },
    products: { title: 'Nos viandes et plats préparés', all: 'Toutes' },
    categories: { Beef: 'Boeuf', Lamb: 'Agneau', Chicken: 'Poulet', Veal: 'Veau', Spices: 'Épices', Oil: 'Huiles', Premade: 'Plats préparés' },
    product: { addToBasket: 'Ajouter au panier', each: 'unité', outOfStock: 'Rupture de Stock' },
    products_list: {
      b1_name: 'Steak Ribeye (par lb)',
      b1_desc: 'Ribeye bien persillé, coupe casher.',
      b2_name: 'Boeuf Haché (1 lb)',
      b2_desc: 'Boeuf haché frais, parfait pour les hamburgers.',
      b3_name: 'Cubes de Boeuf (par lb)',
      b3_desc: 'Cubes tendres, parfaits pour un ragoût.',
      b4_name: 'Côtes Courtes (par lb)',
      b4_desc: 'Côtes courtes généreuses pour le braisage.',
      b5_name: 'Os de Boeuf (par lb)',
      b5_desc: 'Os pour le bouillon et le stock.',
      b6_name: 'Steak de Flanc de Boeuf (par lb)',
      b6_desc: 'Steak de flanc maigre, idéal pour griller.',
      b7_name: 'Roulade de Boeuf (par lb)',
      b7_desc: 'Roulade de boeuf roulée, pré-préparée.',
      b8_name: 'Queue de Boeuf (par lb)',
      b8_desc: 'Queue de boeuf pour soupes et ragoûts.',
      l1_name: 'Côtelettes d\'Agneau (par lb)',
      l1_desc: 'Tendres côtelettes d\'agneau, parées.',
      c1_name: 'Poulet Entier',
      c1_desc: 'Poulet élevé en liberté.',
      c2_name: 'Filet de Poulet (par lb)',
      c2_desc: 'Filet désossé et sans peau.',
      c3_name: 'Cuisses de Poulet (par lb)',
      c3_desc: 'Cuisses savoureuses et juteuses.',
      c4_name: 'Escalope de Poulet (par lb)',
      c4_desc: 'Escalopes fines de poulet, prêtes à cuire.',
      c5_name: 'Cuisses de Poulet (par lb)',
      c5_desc: 'Cuisses de poulet frais.',
      c6_name: 'Ailes de Poulet (par lb)',
      c6_desc: 'Ailes de poulet, idéales pour frire ou cuire au four.',
      c7_name: 'Schnitzel de Poulet',
      c7_desc: 'Schnitzel de poulet pané.',
      v1_name: 'Steak de Veau (par lb)',
      v1_desc: 'Steak de veau premium, tendre et délicat.',
      v2_name: 'Cubes de Veau (par lb)',
      v2_desc: 'Parfaits pour un ragoût ou une rôti de veau.',
      sp1_name: 'Épices Dafina',
      sp1_desc: 'Mélange d\'épices traditionnel Dafina.',
      sp2_name: 'Paprika Rouge',
      sp2_desc: 'Poudre de paprika rouge de haute qualité.',
      sp3_name: 'Poivre Blanc',
      sp3_desc: 'Poivre blanc moulu, qualité premium.',
      sp4_name: 'Curcuma',
      sp4_desc: 'Poudre de curcuma pur.',
      sp5_name: 'Ail Granulé',
      sp5_desc: 'Granulés d\'ail déshydratés.',
      p1_name: 'Kofta (préparé, 1 lb)',
      p1_desc: 'Boeuf haché assaisonné (Casher), prêt à griller.',
      p2_name: 'Cuisses de Poulet Marinées',
      p2_desc: 'Cuisses de poulet marinées prêtes à cuisiner.',
      p2c_name: 'Cuisses de Poulet Marinées',
      p2c_desc: 'Cuisses de poulet marinées prêtes à cuisiner.',
      p3_name: 'Brochettes Shawarma au Poulet',
      p3_desc: 'Poulet mariné shawarma sur brochettes.',
      p4_name: 'Nouilles Chinoises',
      p4_desc: 'Nouilles chinoises préparées.',
      p5_name: 'Riz Épicé',
      p5_desc: 'Mélange de riz assaisonné.',
      p6_name: 'Huile d\'Olive Extra Vierge',
      p6_desc: 'Huile d\'olive extra vierge premium.',
      u1_name: 'Steaks Hachés',
      u1_desc: 'Steaks hachés prêts à cuire.',
      u2_name: 'Jarret de Vache',
      u2_desc: 'Jarret frais pour le braisage.',
      u3_name: 'Gigot d\'Agneau',
      u3_desc: 'Gigot entier, coupe premium.',
      u4_name: 'Steak Minute',
      u4_desc: 'Steak fin, cuisson rapide.',
      u5_name: 'Cubes de Palette',
      u5_desc: 'Cubes tendres pour ragoût.',
      u6_name: 'Faux Filet',
      u6_desc: 'Steak faux filet premium.',
      u7_name: 'Côtes d\'Agneau',
      u7_desc: 'Côtes généreuses pour griller.',
      u8_name: 'Huile de Cuisson',
      u8_desc: 'Huile de cuisson premium.',
      u9_name: 'Rosbif Tritip',
      u9_desc: 'Rosbif tritip savoureux.',
      u10_name: 'Brochettes de Poulet',
      u10_desc: 'Poulet mariné sur brochettes.',
      u11_name: 'Côte de Boeuf Avec Os',
      u11_desc: 'Côte de boeuf premium avec os.',
      u12_name: 'Cuisses de Poulet',
      u12_desc: 'Cuisses de poulet juteuses.',
      u13_name: 'Roulade de Boeuf',
      u13_desc: 'Roulade farcie aux herbes.',
      u14_name: 'Épice à Steak',
      u14_desc: 'Mélange assaisonné pour steaks.',
      u15_name: 'Côtes de Boeuf',
      u15_desc: 'Côtes de boeuf généreuses.',
      u16_name: 'Steak Minute',
      u16_desc: 'Steak fin cuisson rapide.',
      u17_name: 'Carré d\'Agneau',
      u17_desc: 'Carré d\'agneau élégant.',
      u18_name: 'Poulet Mariné',
      u18_desc: 'Poulet pré-mariné.',
      u18c_name: 'Poulet Mariné',
      u18c_desc: 'Poulet pré-mariné.',
      u19_name: 'Steak aux Poivres',
      u19_desc: 'Assaisonné de poivres.',
      u20_name: 'Steak de Boeuf',
      u20_desc: 'Steak de boeuf classique.',
      u21_name: 'Ailes de Poulet',
      u21_desc: 'Ailes de poulet croustillantes.',
      u22_name: 'Poitrine de Boeuf',
      u22_desc: 'Poitrine riche et savoureuse.',
      u23_name: 'Cubes de Steak',
      u23_desc: 'Cubes de boeuf pour sauté.',
      u24_name: 'Poitrine d\'Agneau',
      u24_desc: 'Coupe poitrine d\'agneau.',
      u25_name: 'Burgers de Boeuf',
      u25_desc: 'Steaks hachés prêts à cuire.',
      u26_name: 'Rôti de Palette',
      u26_desc: 'Rôti de palette de boeuf.',
      u27_name: 'Cumin',
      u27_desc: 'Épice cumin moulue.',
      u28_name: 'Huile de Truffe',
      u28_desc: 'Huile aromatisée à la truffe.',
      u29_name: 'Herbes de Provence',
      u29_desc: 'Mélange d\'herbes méditerranéen.',
      u30_name: 'Faux Filet d\'Agneau',
      u30_desc: 'Steak faux filet d\'agneau.',
      u31_name: 'Steaks de Veau',
      u31_desc: 'Steaks de veau premium.',
      u32_name: 'Nuggets de Poulet',
      u32_desc: 'Nuggets de poulet panés.',
      u33_name: 'Épices à Boulettes',
      u33_desc: 'Assaisonnement pour boulettes.',
      u34_name: 'Lanières de Boeuf',
      u34_desc: 'Lanières de boeuf tranchées.',
      u35_name: 'Boeuf Spécial',
      u35_desc: 'Coupe de boeuf spéciale.',
    },
    cart: { title: 'Votre panier', empty: 'Votre panier est vide.', browse: 'Voir les viandes', remove: 'Retirer', total: 'Total', proceed: 'Passer au paiement' },
    checkout: {
      title: 'Paiement',
      method: 'Livraison / Retrait',
      delivery: 'Livraison',
      pickup: 'Retrait',
      address: 'Adresse de livraison',
      firstName: 'Prénom',
      lastName: 'Nom',
      email: 'Email',
      phone: 'Téléphone',
      street: 'Adresse',
      city: 'Ville',
      postal: 'Code postal',
      summary: 'Récapitulatif de commande',
      subtotal: 'Sous-total',
      fee: 'Livraison',
      total: 'Total',
      payWith: 'Soumettre la commande à Clover',
      submitOrder: 'Soumettre la commande',
      processing: 'Envoi de la commande...',
      cloverNote: 'Votre commande sera envoyée à la caisse. Le paiement sera traité au comptoir.'
    },
    contact: { title: 'Nous contacter', name: 'Nom', email: 'Email', message: 'Message', send: 'Envoyer', thanks: 'Merci ! Nous avons bien reçu votre message (démo).' },
    about: {
      title: 'À propos d’Amsellem',
      p1: 'Bienvenue chez Amsellem, votre boucherie casher de quartier. Nous proposons des pièces de qualité, préparées selon les règles casher, avec un service chaleureux et un profond attachement à la tradition.',
      p2: 'Entreprise familiale — au service de la communauté avec soin.'
    },
    footer: {
      title: 'Notre adresse',
      address: '2079 Rue Saint-Louis',
      city: 'Saint-Laurent, QC',
      postal: 'H4M 1P1',
      privacy: 'Politique de confidentialité'
    },
    privacy: {
      title: 'Politique de confidentialité',
      intro: 'Nous respectons votre vie privée. Cette page résume la manière dont nous traitons les données pour cette application de démonstration.',
      data: 'Données personnelles',
      data_text: 'Nous collectons uniquement les informations que vous soumettez (par ex., coordonnées) pour traiter les commandes ou répondre aux demandes. Nous ne vendons aucune donnée.',
      payments: 'Paiements',
      payments_text: 'Les commandes sont envoyées au système POS Clover pour traitement. Le paiement est effectué au point de vente.',
      contact: 'Contact',
      contact_text: 'Des questions ? Contactez-nous via le formulaire sur la page Contact.'
    }
  }
}

export function I18nProvider({ children }){
  const [lang, setLang] = useState(() => {
    try{ return localStorage.getItem('ams_lang') || 'en' } catch { return 'en' }
  })
  useEffect(() => { try{ localStorage.setItem('ams_lang', lang) } catch{} }, [lang])
  const toggleLang = () => setLang(prev => prev === 'en' ? 'fr' : 'en')

  const t = useMemo(() => {
    const table = dict[lang]
    return (key) => {
      const parts = key.split('.')
      let cur = table
      for(const p of parts){ cur = cur?.[p] }
      return cur ?? key
    }
  }, [lang])

  const tCategory = (cat) => dict[lang].categories[cat] ?? cat

  return (
    <I18nContext.Provider value={{ lang, setLang, toggleLang, t, tCategory }}>
      {children}
    </I18nContext.Provider>
  )
}

export function useI18n(){ return useContext(I18nContext) }